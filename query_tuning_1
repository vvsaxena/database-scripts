Original Query ( took 3 minutes )
=========================================================================================================================================
SELECT SQL_NO_CACHE af.amount AS 'Activation', ROUND((IFNULL(af.amount,0.00) + IFNULL((SELECT SUM(ce.item_charge) FROM customer_equipment ce WHERE ce.customer_id = c.id AND ce.status = 'active'),0.00)),2) AS 'Activation+Equipment', DATE_FORMAT(c.created_at, '%m/%d/%Y') AS 'Customer Created Date', dn.number AS 'Dealer Number', (SELECT bc.name FROM customer_billing cb LEFT JOIN billing_cycles bc ON bc.id = cb.bill_cycle_id WHERE cb.customer_id = c.id AND c.customer_billing_default_id = cb.id) AS 'Billing Cycle', AES_DECRYPT(c.birthdate, 'XXXXX') AS 'DOB', c.city AS 'City', ROUND(IFNULL((SELECT SUM(ce.item_charge) FROM customer_equipment ce WHERE ce.customer_id = c.id AND ce.status = 'active'),0.00),2) AS 'Equipment Charge', c.fund_amount AS 'Fund Amount', c.id AS ID, DATE_FORMAT(FROM_UNIXTIME(ts.start_time), '%m/%d/%Y') AS 'Install Date', c.is_installed AS 'Installed', IFNULL(mmr.amount, 0.00) AS 'MMR', mp.name AS 'Monitoring Plan', DATE_FORMAT(c.sale_date, '%m/%d/%Y') AS 'Sale Date', CONCAT(rep.fname,' ',rep.lname) AS 'Sales Rep', rep_mg.name AS 'Sales Rep Marketing Group', DATE_FORMAT(c.customer_cancel_date, '%m/%d/%Y') AS 'Cancellation Date', ccr.name AS 'Cancellation Reason', c.customer_is_cancelled AS 'Cancelled', c.rebate_check AS 'Rebate', c.state AS 'State', c.zip AS 'Zip', (SELECT COUNT(ce.id) FROM customer_equipment ce WHERE ce.customer_id = c.id AND ce.status = 'active') AS 'Total Drops', lcc.name AS 'Lead Campaign', c.fund_amount_bonus AS 'Fund Amount Bonus', c.fund_amount_hold AS 'Fund Amount Holdback', c.fund_amount_received AS 'Fund Amount Received', DATE_FORMAT(c.fund_reinstate_date, '%m/%d/%Y') AS 'Fund Reinstated Date', c.fund_reversal_amount AS 'Fund Reversal Amount', DATE_FORMAT(c.fund_reversal_date, '%m/%d/%Y') AS 'Fund Reversal Date', fs.name AS 'Funding Status', DATE_FORMAT(c.sale_date, '%m/%d/%Y') AS 'SALE DATE', ROUND((IFNULL(af.amount,0.00) + IFNULL((SELECT SUM(ce.item_charge) FROM customer_equipment ce WHERE ce.customer_id = c.id AND ce.status = 'active'),0.00)),2) AS 'ACTIVATION+EQUIPMENT', ROUND(IFNULL((SELECT SUM(ce.item_charge) FROM customer_equipment ce WHERE ce.customer_id = c.id AND ce.status = 'active'),0.00),2) AS 'EQUIPMENT CHARGE', 
– ROUND(IFNULL((SELECT SUM(ce.item_charge) FROM customer_equipment ce WHERE ce.customer_id = c.id AND ce.status = 'active' AND ce.install_tech_schedule_id = c.install_appointment_id),0.00),2) AS 'Equipment Charge From Install Appointment',
ROUND(IFNULL((SELECT SUM(ce.equipment_cost) FROM customer_equipment ce WHERE ce.customer_id = c.id AND ce.status = 'active'),0.00),2) AS 'Equipment Cost',
– ROUND(IFNULL((SELECT SUM(ce.equipment_cost) FROM customer_equipment ce WHERE ce.customer_id = c.id AND ce.status = 'active' AND ce.install_tech_schedule_id = c.install_appointment_id),0.00),2) AS 'Equipment Cost From Install Appointment',
IF((SELECT COUNT(cer.id) FROM customer_equipment_reconcile cer WHERE cer.customer_id = c.id AND cer.status = 'active') > 0,'true','false') AS 'Equipment To Reconcile', (SELECT SUM(ce.equipment_points) FROM customer_equipment ce WHERE ce.customer_id = c.id AND ce.status = 'active') AS 'Equipment Total Points', ROUND( IFNULL((SELECT SUM(ce.equipment_cost) FROM customer_equipment ce WHERE ce.customer_id = c.id AND ce.status = 'active'),0) + IFNULL((SELECT SUM(ptc.amount_paid) FROM payroll_to_customer ptc WHERE ptc.customer_id = c.id AND ptc.status = 'active'),0) ,2) AS 'Equipment+Payroll', CONCAT(train_rep.fname,' ',train_rep.lname) AS 'Train(ee/er)', c.account_num AS 'AccountNum', l.name AS 'Office', DATE_FORMAT(FROM_UNIXTIME(c.original_install_start_time), '%m/%d/%Y') AS 'Original Install Date', c.fname AS 'First Name', c.lname AS 'Last Name', c.state AS 'STATE', lc.name AS 'Partner Company', c.lead_company_unique_id AS 'PartnerCompanyUniqueID', rep.payroll_identifier AS 'Sales Rep Payroll Identifier', c.sellto_company_unique_id AS 'Sell To Unique ID', c.rep_id AS 'Sales Rep ID', c.train_id AS 'Train(ee/er) ID', DATE_FORMAT(c.updated_at, '%m/%d/%Y | %l:%i %p') AS 'Updated At Date', (SELECT ou.value FROM object_udfs ou WHERE ou.udf_id = 10 AND ou.object_id = c.id) AS 'Assigned Date', (SELECT ou.value FROM object_udfs ou WHERE ou.udf_id = 1 AND ou.object_id = c.id) AS 'Builder PO', (SELECT ou.value FROM object_udfs ou WHERE ou.udf_id = 7 AND ou.object_id = c.id) AS 'Concierge Stage', (SELECT ou.value FROM object_udfs ou WHERE ou.udf_id = 4 AND ou.object_id = c.id) AS 'Install Stage', (SELECT ou.value FROM object_udfs ou WHERE ou.udf_id = 13 AND ou.object_id = c.id) AS 'Subdivision', (SELECT ou.value FROM object_udfs ou WHERE ou.udf_id = 18 AND ou.object_id = c.id) AS 'Expected Closing Date' FROM customers c LEFT JOIN activation_fee af ON af.id = c.activation_fee_id LEFT JOIN dealer_numbers dn ON dn.id = c.dealer_number_id LEFT JOIN tech_schedule ts ON ts.id = c.install_appointment_id LEFT JOIN mmrs mmr ON mmr.id = c.mmr_id LEFT JOIN altx_global.monitoring_plans mp ON mp.id = c.monitoring_plan_id LEFT JOIN users rep ON rep.id = c.rep_id LEFT JOIN users train_rep ON train_rep.id = c.train_id LEFT JOIN marketing_groups rep_mg ON rep_mg.id = rep.marketing_group_id LEFT JOIN customer_cancel_reasons ccr ON ccr.id = c.customer_cancel_reason_id LEFT JOIN lead_company_campaigns lcc ON lcc.id = c.lead_company_campaign_id LEFT JOIN lead_companies lc ON lc.id = c.lead_company_id LEFT JOIN locations l ON l.id = c.location_id LEFT JOIN altx_global.funding_status fs ON fs.id = c.funding_status_id WHERE c.status = 'active' AND c.sale_date <> '0000-00-00' AND DATE_FORMAT(c.updated_at, '%Y-%m-%d') >= '2019-01-08' ORDER BY c.id DESC
;
=============================================================================================================================================
Optimized query ( took only 15 seconds )
===========================================================================================================================================
SELECT SQL_NO_CACHE af.amount AS 'Activation', ROUND((IFNULL(af.amount,0.00) + IFNULL((SELECT SUM(ce.item_charge) FROM customer_equipment ce WHERE ce.customer_id = c.id AND ce.status = 'active'),0.00)),2) AS 'Activation+Equipment', DATE_FORMAT(c.created_at, '%m/%d/%Y') AS 'Customer Created Date', dn.number AS 'Dealer Number', (SELECT bc.name FROM customer_billing cb LEFT JOIN billing_cycles bc ON bc.id = cb.bill_cycle_id WHERE cb.customer_id = c.id AND c.customer_billing_default_id = cb.id) AS 'Billing Cycle', AES_DECRYPT(c.birthdate, 'XXXXXXXX') AS 'DOB', c.city AS 'City', ROUND(IFNULL((SELECT SUM(ce.item_charge) FROM customer_equipment ce WHERE ce.customer_id = c.id AND ce.status = 'active'),0.00),2) AS 'Equipment Charge', c.fund_amount AS 'Fund Amount', c.id AS ID, DATE_FORMAT(FROM_UNIXTIME(ts.start_time), '%m/%d/%Y') AS 'Install Date', c.is_installed AS 'Installed', IFNULL(mmr.amount, 0.00) AS 'MMR', mp.name AS 'Monitoring Plan', DATE_FORMAT(c.sale_date, '%m/%d/%Y') AS 'Sale Date', CONCAT(rep.fname,' ',rep.lname) AS 'Sales Rep', rep_mg.name AS 'Sales Rep Marketing Group', DATE_FORMAT(c.customer_cancel_date, '%m/%d/%Y') AS 'Cancellation Date', ccr.name AS 'Cancellation Reason', c.customer_is_cancelled AS 'Cancelled', c.rebate_check AS 'Rebate', c.state AS 'State', c.zip AS 'Zip', (SELECT COUNT(ce.id) FROM customer_equipment ce WHERE ce.customer_id = c.id AND ce.status = 'active') AS 'Total Drops', lcc.name AS 'Lead Campaign', c.fund_amount_bonus AS 'Fund Amount Bonus', c.fund_amount_hold AS 'Fund Amount Holdback', c.fund_amount_received AS 'Fund Amount Received', DATE_FORMAT(c.fund_reinstate_date, '%m/%d/%Y') AS 'Fund Reinstated Date', c.fund_reversal_amount AS 'Fund Reversal Amount', DATE_FORMAT(c.fund_reversal_date, '%m/%d/%Y') AS 'Fund Reversal Date', fs.name AS 'Funding Status', DATE_FORMAT(c.sale_date, '%m/%d/%Y') AS 'SALE DATE', ROUND((IFNULL(af.amount,0.00) + IFNULL((SELECT SUM(ce.item_charge) FROM customer_equipment ce WHERE ce.customer_id = c.id AND ce.status = 'active'),0.00)),2) AS 'ACTIVATION+EQUIPMENT', ROUND(IFNULL((SELECT SUM(ce.item_charge) FROM customer_equipment ce WHERE ce.customer_id = c.id AND ce.status = 'active'),0.00),2) AS 'EQUIPMENT CHARGE',
ROUND(IFNULL(subq.total1,0.00),2) AS 'Equipment Charge From Install Appointment',
ROUND(IFNULL((SELECT SUM(ce.equipment_cost) FROM customer_equipment ce WHERE ce.customer_id = c.id AND ce.status = 'active'),0.00),2) AS 'Equipment Cost',
ROUND(IFNULL(subq.total2,0.00),2) AS 'Equipment Cost From Install Appointment',
IF((SELECT COUNT(cer.id) FROM customer_equipment_reconcile cer WHERE cer.customer_id = c.id AND cer.status = 'active') > 0,'true','false') AS 'Equipment To Reconcile', (SELECT SUM(ce.equipment_points) FROM customer_equipment ce WHERE ce.customer_id = c.id AND ce.status = 'active') AS 'Equipment Total Points', ROUND( IFNULL((SELECT SUM(ce.equipment_cost) FROM customer_equipment ce WHERE ce.customer_id = c.id AND ce.status = 'active'),0) + IFNULL((SELECT SUM(ptc.amount_paid) FROM payroll_to_customer ptc WHERE ptc.customer_id = c.id AND ptc.status = 'active'),0) ,2) AS 'Equipment+Payroll', CONCAT(train_rep.fname,' ',train_rep.lname) AS 'Train(ee/er)', c.account_num AS 'AccountNum', l.name AS 'Office', DATE_FORMAT(FROM_UNIXTIME(c.original_install_start_time), '%m/%d/%Y') AS 'Original Install Date', c.fname AS 'First Name', c.lname AS 'Last Name', c.state AS 'STATE', lc.name AS 'Partner Company', c.lead_company_unique_id AS 'PartnerCompanyUniqueID', rep.payroll_identifier AS 'Sales Rep Payroll Identifier', c.sellto_company_unique_id AS 'Sell To Unique ID', c.rep_id AS 'Sales Rep ID', c.train_id AS 'Train(ee/er) ID', DATE_FORMAT(c.updated_at, '%m/%d/%Y | %l:%i %p') AS 'Updated At Date', (SELECT ou.value FROM object_udfs ou WHERE ou.udf_id = 10 AND ou.object_id = c.id) AS 'Assigned Date', (SELECT ou.value FROM object_udfs ou WHERE ou.udf_id = 1 AND ou.object_id = c.id) AS 'Builder PO', (SELECT ou.value FROM object_udfs ou WHERE ou.udf_id = 7 AND ou.object_id = c.id) AS 'Concierge Stage', (SELECT ou.value FROM object_udfs ou WHERE ou.udf_id = 4 AND ou.object_id = c.id) AS 'Install Stage', (SELECT ou.value FROM object_udfs ou WHERE ou.udf_id = 13 AND ou.object_id = c.id) AS 'Subdivision', (SELECT ou.value FROM object_udfs ou WHERE ou.udf_id = 18 AND ou.object_id = c.id) AS 'Expected Closing Date'

FROM customers c
LEFT JOIN (
SELECT ce.customer_id,SUM(ce.item_charge) as "total1",SUM(ce.equipment_cost) as "total2"
FROM customers c,customer_equipment ce
WHERE ce.customer_id = c.id AND ce.status = 'active'
AND ce.install_tech_schedule_id = c.install_appointment_id
group by ce.customer_id
) AS subq
ON c.id = subq.customer_id

LEFT JOIN activation_fee af ON af.id = c.activation_fee_id
LEFT JOIN dealer_numbers dn ON dn.id = c.dealer_number_id
LEFT JOIN tech_schedule ts ON ts.id = c.install_appointment_id
LEFT JOIN mmrs mmr ON mmr.id = c.mmr_id LEFT JOIN altx_global.monitoring_plans mp ON mp.id = c.monitoring_plan_id LEFT JOIN users rep ON rep.id = c.rep_id LEFT JOIN users train_rep ON train_rep.id = c.train_id LEFT JOIN marketing_groups rep_mg ON rep_mg.id = rep.marketing_group_id LEFT JOIN customer_cancel_reasons ccr ON ccr.id = c.customer_cancel_reason_id LEFT JOIN lead_company_campaigns lcc ON lcc.id = c.lead_company_campaign_id LEFT JOIN lead_companies lc ON lc.id = c.lead_company_id LEFT JOIN locations l ON l.id = c.location_id LEFT JOIN altx_global.funding_status fs ON fs.id = c.funding_status_id WHERE c.status = 'active' AND c.sale_date <> '0000-00-00' AND DATE_FORMAT(c.updated_at, '%Y-%m-%d') >= '2019-01-08' ORDER BY c.id DESC
;
==========================================================================================================================================
